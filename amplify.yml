version: 1
environment:
  variables:
    VITE_AWS_REGION: ap-northeast-1
    VITE_COGNITO_USER_POOL_ID: ap-northeast-1_K4gyhxpG9
    VITE_COGNITO_CLIENT_ID: 14ivj9dtdk1c65t390g1l9vbpc
    VITE_COGNITO_IDENTITY_POOL_ID: ap-northeast-1:af1ce951-b348-41d1-9a7a-50fceb21efd2
    VITE_API_ENDPOINT: https://api-noah.com
    VITE_API_BASE_URL: https://api-noah.com/api
    VITE_ENABLE_DISCOVERY_MODE: true
    VITE_ENABLE_MULTILINGUAL: true
    VITE_DEFAULT_LANGUAGE: english
    VITE_MAX_MESSAGE_LENGTH: 2000
    VITE_TYPING_INDICATOR_DELAY: 1000
frontend:
  phases:
    preBuild:
      commands:
        - cd frontend
        - echo "Environment variables:"
        - env | grep VITE_
        - npm ci --cache .npm --prefer-offline
    build:
      commands:
        - echo "Building with API endpoint:" $VITE_API_ENDPOINT
        - npm run build
  artifacts:
    baseDirectory: frontend/dist
    files:
      - '**/*'
  cache:
    paths:
      - frontend/.npm/**/*